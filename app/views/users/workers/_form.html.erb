<%= render 'shared/error_massages', object: f.object %>

<%= f.label :name %>
<%= f.text_field :name, class: "form-control", placeholder: Worker.human_attribute_name(:name) %><br>

<%= f.label :name_kana %>
<%= f.text_field :name_kana, class: "form-control", placeholder: Worker.human_attribute_name(:name_kana) %><br>

<%= f.label :country %>
<%= f.text_field :country, class: "form-control", placeholder: Worker.human_attribute_name(:country) %><br>

<%= f.label :my_address %>
<%= f.text_field :my_address, class: "form-control", placeholder: Worker.human_attribute_name(:my_address) %><br>

<%= f.label :my_phone_number %>
<%= f.text_field :my_phone_number, class: "form-control", placeholder: Worker.human_attribute_name(:my_phone_number) %><br>

<%= f.label :family_address %>
<%= f.text_field :family_address, class: "form-control", placeholder: Worker.human_attribute_name(:family_address) %><br>

<%= f.label :family_phone_number %>
<%= f.text_field :family_phone_number, class: "form-control", placeholder: Worker.human_attribute_name(:family_phone_number) %><br>

<%= f.label :birth_day_on %>
<%= f.date_field :birth_day_on, class: "form-control" %><br>

<%= f.label :abo_blood_type %>
<%= f.select :abo_blood_type, Worker.abo_blood_types_i18n.invert, {}, {class: "form-control"} %><br>

<%= f.label :rh_blood_type %>
<%= f.select :rh_blood_type, Worker.rh_blood_types_i18n.invert, {include_blank: true}, {class: "form-control"} %><br>

<!-- 下記職種はenum未設計の為ひとまずintegerの数字が表示されるようにしています -->
<%= f.label :job_type %>
<%= f.number_field :job_type, class: "form-control" %><br>
<!-- -->

<%= f.label :hiring_on %>
<%= f.date_field :hiring_on, class: "form-control" %><br>

<%= f.label :experience_term_before_hiring %>
<%= f.number_field :experience_term_before_hiring, class: "form-control", min: 0 %><br>

<%= f.label :blank_term %>
<%= f.number_field :blank_term, class: "form-control", min: 0 %><br>

<%= f.label :carrier_up_id %>
<%= f.text_field :carrier_up_id, class: "form-control", placeholder: Worker.human_attribute_name(:carrier_up_id) %><br>

<div class="list-group">
  <% @worker.worker_licenses.each do |worker_license| %>
    <%= f.fields_for :worker_licenses, worker_license do |wl| %>
      <div class="list-group-item">
        <div class="row">
          <div class="col-md-3">
            <%= wl.label :license_id %>
            <%= wl.collection_select :license_id, License.all, :id, :name, { prompt: '免許を選択してください' }, { class: 'form-control' } %>
          </div>
          <div class="col-md-2">
            <%= wl.label :got_on %>
            <%= wl.date_field :got_on, class: 'form-control' %>
          </div>
          <div class="col-md-3">
            <%= wl.label :images %>
            <%= wl.file_field :images, accept: 'image/jpg, image/jpeg, image/png', multiple: true, class: "form-control" %>
          </div>
          <div class="col-md-4">
            <% if worker_license.images.any? %>
              <% worker_license.images.each_with_index do |image, index|%>
                <%= image_tag(image.url) %>
                <%= link_to "削除", users_worker_update_license_images_path(worker_license.worker_id, license_id: worker_license.id, index: index),
                    method: :patch, data: { confirm: "本当に削除してもよろしいですか？" } %>
              <% end %>
            <% end %>
          </div>
        </div><br>
      </div>
    <% end %>
  <% end %>
  

  <% @worker.worker_skill_trainings.each do |worker_skill_training| %>
    <%= f.fields_for :worker_skill_trainings, worker_skill_training do |wst| %>
      <div class="list-group-item">
        <div class="row">
          <div class="col-md-3">
            <%= wst.label :skill_training_id %>
            <%= wst.collection_select :skill_training_id, SkillTraining.all, :id, :name, 
                { prompt: '技能講習を選択してください' }, { class: 'form-control' } %>
          </div>
          <div class="col-md-2">
            <%= wst.label :got_on %>
            <%= wst.date_field :got_on, class: 'form-control' %>
          </div>
          <div class="col-md-3">
            <%= wst.label :images %>
            <%= wst.file_field :images, accept: 'image/jpg, image/jpeg, image/png', multiple: true, class: "form-control" %>
          </div>
          <div class="col-md-4">
            <% if worker_skill_training.images.any? %>
              <% worker_skill_training.images.each_with_index do |image, index|%>
                <%= image_tag(image.url) %>
                <%= link_to "削除", users_worker_update_skill_training_images_path(worker_skill_training.worker_id, skill_training_id: worker_skill_training.id, index: index),
                    method: :patch, data: { confirm: "本当に削除してもよろしいですか？" } %>
              <% end %>
            <% end %>
          </div>
        </div><br>
      </div>
    <% end %>
  <% end %>

  <% @worker.worker_special_educations.each do |worker_special_education| %>
    <%= f.fields_for :worker_special_educations, worker_special_education do |wse| %>
      <div class="list-group-item">
        <div class="row">
          <div class="col-md-3">
            <%= wse.label :special_education_id %>
            <%= wse.collection_select :special_education_id, SpecialEducation.all, :id, :name, { prompt: '特別教育を選択してください' }, { class: 'form-control' } %>
          </div>
          <div class="col-md-2">
            <%= wse.label :got_on %>
            <%= wse.date_field :got_on, class: 'form-control' %>
          </div>
          <div class="col-md-3">
            <%= wse.label :images %>
            <%= wse.file_field :images, accept: 'image/jpg, image/jpeg, image/png', multiple: true, class: "form-control" %>
          </div>
          <div class="col-md-4">
            <% if worker_special_education.images.any? %>
              <% worker_special_education.images.each_with_index do |image, index|%>
                <%= image_tag(image.url) %>
                <%= link_to "削除", users_worker_update_special_education_images_path(worker_special_education.worker_id, special_education_id: worker_special_education.id, index: index),
                    method: :patch, data: { confirm: "本当に削除してもよろしいですか？" } %>
              <% end %>
            <% end %>
          </div>
        </div><br>
      </div>
    <% end %>
  <% end %>
</div>

